# üí∞ Sistema de Controle Financeiro Pessoal

Um sistema moderno e intuitivo para controle de finan√ßas pessoais, desenvolvido com Next.js e Supabase.

## üöÄ Vis√£o Geral

Sistema completo de controle financeiro pessoal com funcionalidades avan√ßadas como:

- ‚úÖ **Transa√ß√µes** - Receitas, despesas e transfer√™ncias
- ‚úÖ **Parcelamento** - Compras divididas automaticamente
- ‚úÖ **Recorr√™ncia** - Transa√ß√µes que se repetem
- ‚úÖ **Metas** - Controle de or√ßamento por categoria
- ‚úÖ **Relat√≥rios** - Gr√°ficos e dashboards intuitivos
- ‚úÖ **Multi-contas** - Gest√£o de v√°rias contas/cart√µes

## üõ†Ô∏è Stack Tecnol√≥gica

### Frontend
- **Next.js 14** - Framework React com App Router
- **TypeScript** - Tipagem est√°tica
- **Tailwind CSS** - Estiliza√ß√£o utilit√°ria
- **shadcn/ui** - Componentes modernos
- **Recharts** - Gr√°ficos interativos
- **Context API** - Gerenciamento de estado React
- **Lucide React** - √çcones

### Backend & Database
- **Supabase** - Backend as a Service
- **PostgreSQL** - Banco de dados
- **Supabase Storage** - Upload de anexos
- **Row Level Security** - Seguran√ßa nativa

### Deploy
- **Vercel** - Hospedagem frontend
- **Supabase Cloud** - Hospedagem backend

## üìã Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado:

- **Node.js** (vers√£o 18 ou superior)
- **npm** ou **yarn**
- **Git**
- Conta no **Supabase** (gratuita)
- Conta no **Vercel** (gratuita, opcional)

## ‚ö° Instala√ß√£o R√°pida

### 1. Clonar o Reposit√≥rio

```bash
git clone https://github.com/Rica-VibeCoding/controle_financeiro.git
cd controle_financeiro
```

### 2. Instalar Depend√™ncias

```bash
npm install

# Configurar shadcn/ui
npx shadcn-ui@latest init

# Instalar componentes necess√°rios
npx shadcn-ui@latest add button card dialog form input select toast badge table
```

### 3. Configurar Vari√°veis de Ambiente

Copie o arquivo de exemplo e configure suas credenciais:

```bash
cp .env.example .env.local
```

Edite o arquivo `.env.local`:

```env
# Supabase - Projeto: nzgifjdewdfibcopolof
NEXT_PUBLIC_SUPABASE_URL=https://nzgifjdewdfibcopolof.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56Z2lmamRld2RmaWJjb3BvbG9mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc0NjA4NDAsImV4cCI6MjA2MzAzNjg0MH0.O7MKZNx_Cd-Z12iq8h0pq6Sq0bmJazcxDHvlVb4VJQc

# Chave secreta service_role (usar apenas no servidor/desenvolvimento)
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56Z2lmamRld2RmaWJjb3BvbG9mIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0NzQ2MDg0MCwiZXhwIjoyMDYzMDM2ODQwfQ.6D9JGbSXzQZtFSu96hA_4cTtde8C3G-WwPG3C4Ta5n0

# Ambiente
NODE_ENV=development

# URLs
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_SUPABASE_STORAGE_URL=https://nzgifjdewdfibcopolof.supabase.co/storage/v1/object/public

# Configura√ß√µes da aplica√ß√£o
NEXT_PUBLIC_APP_NAME="Controle Financeiro"
NEXT_PUBLIC_MAX_FILE_SIZE=5242880
```

### 4. Configurar Banco de Dados

Execute o script SQL no Supabase:

1. Acesse o [Supabase Dashboard](https://supabase.com/dashboard)
2. V√° para **SQL Editor**
3. Cole e execute o conte√∫do do arquivo `docs/schema.sql`

### 5. Configurar Storage (Anexos)

O storage j√° √© configurado automaticamente pelo script `schema.sql`, mas se precisar configurar manualmente:

1. V√° para **Storage** no Supabase Dashboard
2. Verificar se existe o bucket: `anexos-transacoes`
3. Se n√£o existir, ser√° criado automaticamente pelo script SQL

**Nota:** As pol√≠ticas de acesso j√° est√£o inclu√≠das no script `schema.sql`

### 6. Iniciar Desenvolvimento

```bash
npm run dev
```

Acesse: http://localhost:3000

## üìÅ Estrutura do Projeto

```
controle-financeiro/
‚îú‚îÄ‚îÄ üìÅ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ app/                    # P√°ginas (App Router)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dashboard/          # Tela principal
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ transacoes/         # Gest√£o de transa√ß√µes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ relatorios/         # Relat√≥rios e metas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ contas/             # Gest√£o de contas
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ categorias/         # Gest√£o de categorias
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ componentes/            # Componentes React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ layout/             # Layout base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ dashboard/          # Dashboard espec√≠ficos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ transacoes/         # Transa√ß√µes espec√≠ficos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ metas/              # Metas espec√≠ficos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ ui/                 # Componentes shadcn/ui
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ comum/              # Componentes reutiliz√°veis
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ servicos/               # L√≥gica de neg√≥cio
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ supabase/           # API Supabase
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ relatorios/         # C√°lculos e processamento
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ recorrencia/        # Transa√ß√µes recorrentes
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ hooks/                  # Hooks customizados
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ contextos/              # Context API para estado global
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ tipos/                  # Tipos TypeScript
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ utilitarios/            # Fun√ß√µes auxiliares
‚îÇ
‚îú‚îÄ‚îÄ üìÅ public/                     # Arquivos est√°ticos
‚îú‚îÄ‚îÄ üìÅ docs/                       # Documenta√ß√£o do projeto
‚îî‚îÄ‚îÄ üìÑ Arquivos de configura√ß√£o
```

## üéÆ Comandos Principais

### Desenvolvimento

```bash
# Iniciar servidor de desenvolvimento
npm run dev

# Build para produ√ß√£o
npm run build

# Iniciar servidor produ√ß√£o (ap√≥s build)
npm run start

# Verificar c√≥digo (linting)
npm run lint

# Verificar tipos TypeScript
npx tsc --noEmit
```

### Banco de Dados

```bash
# Gerar tipos TypeScript do Supabase
npx supabase gen types typescript --project-id nzgifjdewdfibcopolof > src/tipos/supabase.ts

# Reset completo do banco (cuidado!)
# Execute o schema.sql novamente no dashboard
```

### Deploy

```bash
# Deploy no Vercel
vercel --prod

# Preview deploy
vercel
```

## üìä Funcionalidades Principais

### üí∏ Gest√£o de Transa√ß√µes

**Tipos Suportados:**
- **Receita** - Entradas financeiras (sal√°rio, freelance)
- **Despesa** - Sa√≠das financeiras (compras, contas)
- **Transfer√™ncia** - Movimenta√ß√£o entre contas pr√≥prias
- **Parcelada** - Despesas divididas automaticamente

**Recursos:**
- Categoriza√ß√£o hier√°rquica (categoria ‚Üí subcategoria)
- Upload de comprovantes (PDF, imagens)
- Status (pendente, pago, cancelado)
- Observa√ß√µes e centro de custo

### üîÑ Parcelamento Inteligente

```typescript
// Exemplo: Geladeira R$ 1.200 em 12x
const transacao = {
  descricao: 'Geladeira',
  valor: 1200.00, // R$ 1.200,00 em reais
  total_parcelas: 12
};

// Sistema cria automaticamente:
// Parcela 1/12: R$ 100,00 - 15/08/2025
// Parcela 2/12: R$ 100,00 - 15/09/2025
// ... at√© 12/12
```

### üìÖ Transa√ß√µes Recorrentes

Configure uma vez e o sistema gera automaticamente:

- **Sal√°rio** - Todo dia 5 do m√™s
- **Aluguel** - Todo dia 10 do m√™s  
- **Academia** - Todo dia 15 do m√™s

Transa√ß√µes recorrentes nascem com status "pendente" para confirma√ß√£o.

### üéØ Sistema de Metas

**Tipos de Meta:**
- **Por Categoria** - "M√°ximo R$ 500 em Alimenta√ß√£o/m√™s"
- **Total** - "M√°ximo R$ 3.000 gastos/m√™s"

**Alertas Visuais:**
- üü¢ Verde: 0-50% usado
- üü° Amarelo: 51-80% usado
- üü† Laranja: 81-99% usado
- üî¥ Vermelho: 100%+ usado (estourou)

### üìà Dashboard e Relat√≥rios

- **Saldo Total** - Soma de todas as contas
- **Receitas/Despesas do M√™s** - Resumo mensal
- **Gr√°fico por Categorias** - Pizza dos gastos
- **Evolu√ß√£o Temporal** - Linha do tempo
- **Metas** - Progresso visual em barras

## üîß Personaliza√ß√£o

### Adicionar Nova Categoria

```typescript
import { criarCategoria } from '@/servicos/supabase/categorias';

await criarCategoria({
  nome: 'Pets',
  tipo: 'despesa',
  icone: 'heart',
  cor: '#F59E0B',
  ativo: true
});
```

### Criar Formul√°rio Customizado

```typescript
// /componentes/meu-formulario.tsx
import { FormularioTransacao } from '@/componentes/transacoes/formulario-transacao';

export function MeuFormulario() {
  const { criar } = usarTransacoes();
  
  const aoSalvar = async (dados) => {
    await criar(dados);
    // L√≥gica customizada aqui
  };

  return (
    <FormularioTransacao 
      aoSalvar={aoSalvar}
      aoCancelar={() => {}}
    />
  );
}
```

### Adicionar Novo Gr√°fico

```typescript
// /componentes/graficos/meu-grafico.tsx
import { ResponsiveContainer, BarChart, Bar } from 'recharts';

export function MeuGrafico({ dados }) {
  return (
    <ResponsiveContainer width="100%" height={300}>
      <BarChart data={dados}>
        <Bar dataKey="valor" fill="#3B82F6" />
      </BarChart>
    </ResponsiveContainer>
  );
}
```

### Usar Componentes shadcn/ui

```typescript
// /componentes/meu-formulario.tsx
import { Button } from '@/componentes/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/componentes/ui/card';
import { Input } from '@/componentes/ui/input';

export function MeuFormulario() {
  return (
    <Card>
      <CardHeader>
        <CardTitle>Nova Transa√ß√£o</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="space-y-4">
          <Input placeholder="Descri√ß√£o" />
          <Input placeholder="Valor" type="number" />
          <Button>Salvar</Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

## üöÄ Deploy Produ√ß√£o

### Vercel (Recomendado)

1. **Push para GitHub**
   ```bash
   git add .
   git commit -m "Setup inicial"
   git push origin main
   ```

2. **Conectar no Vercel**
   - Acesse [vercel.com](https://vercel.com)
   - Importe o reposit√≥rio GitHub
   - Configure vari√°veis de ambiente

3. **Vari√°veis de Ambiente Produ√ß√£o**
   ```env
   NEXT_PUBLIC_SUPABASE_URL=https://nzgifjdewdfibcopolof.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=sua_chave_anonima
   NEXT_PUBLIC_APP_URL=https://seu-app.vercel.app
   NODE_ENV=production
   ```

4. **Deploy Autom√°tico**
   - Cada push na branch `main` faz deploy automaticamente

### Outras Plataformas

**Netlify:**
```bash
npm run build
# Upload da pasta .next para Netlify
```

**VPS pr√≥prio:**
```bash
npm run build
npm run start
# Configurar nginx/apache como proxy reverso
```

## üß™ Testes

### Testes Manuais

1. **Fluxo B√°sico**
   ```bash
   # 1. Criar conta
   # 2. Criar categoria
   # 3. Criar transa√ß√£o
   # 4. Verificar saldo
   # 5. Criar meta
   # 6. Verificar relat√≥rio
   ```

2. **Testes de Parcelamento**
   ```bash
   # 1. Criar transa√ß√£o parcelada
   # 2. Verificar se todas as parcelas foram criadas
   # 3. Marcar algumas como pagas
   # 4. Verificar impacto no saldo
   ```

3. **Testes de Recorr√™ncia**
   ```bash
   # 1. Criar transa√ß√£o recorrente
   # 2. Verificar pr√≥xima data
   # 3. Simular processamento autom√°tico
   ```

### Dados de Teste

O sistema j√° vem com dados iniciais:

- **15 categorias** (Alimenta√ß√£o, Transporte, etc.)
- **25+ subcategorias** 
- **7 formas de pagamento**
- **5 centros de custo**
- **6 contas exemplo**

## üîß Troubleshooting

### Problemas Comuns

**1. Erro de conex√£o Supabase**
```bash
# Verifique as vari√°veis de ambiente
echo $NEXT_PUBLIC_SUPABASE_URL

# Teste conex√£o
curl https://nzgifjdewdfibcopolof.supabase.co/rest/v1/
```

**2. Erro de build TypeScript**
```bash
# Verificar tipos
npx tsc --noEmit

# Limpar cache
rm -rf .next
npm run build
```

**3. Erro de permiss√£o Supabase**
```sql
-- Verificar pol√≠ticas RLS
SELECT * FROM pg_policies WHERE tablename LIKE 'fp_%';

-- Resetar pol√≠ticas se necess√°rio
ALTER TABLE fp_transacoes DISABLE ROW LEVEL SECURITY;
```

**4. Upload de arquivos n√£o funciona**
```bash
# Verificar bucket no Supabase Storage
# Configurar pol√≠ticas p√∫blicas
# Verificar CORS se necess√°rio
```

### Logs e Debug

```typescript
// Ativar logs detalhados no desenvolvimento
console.log('Debug transa√ß√£o:', transacao);

// Verificar conex√£o Supabase
console.log('Supabase client:', supabase);

// Monitorar queries
supabase.auth.onAuthStateChange((event, session) => {
  console.log('Auth event:', event, session);
});
```

## üìö Recursos Adicionais

### Documenta√ß√£o T√©cnica

- üìã **PRD** - Especifica√ß√µes completas do produto
- üóÉÔ∏è **Schema SQL** - Estrutura do banco de dados
- üîå **API Docs** - Documenta√ß√£o detalhada da API
- üé® **UI Guide** - Guia de componentes e design

### Links √öteis

- **Supabase Dashboard:** https://supabase.com/dashboard/project/nzgifjdewdfibcopolof
- **Vercel Dashboard:** https://vercel.com/dashboard
- **Next.js Docs:** https://nextjs.org/docs
- **Tailwind CSS:** https://tailwindcss.com/docs
- **shadcn/ui:** https://ui.shadcn.com/

### Comunidade

- **GitHub Issues:** https://github.com/Rica-VibeCoding/controle_financeiro/issues
- **Discussions:** https://github.com/Rica-VibeCoding/controle_financeiro/discussions
- **Pull Requests:** https://github.com/Rica-VibeCoding/controle_financeiro/pulls

## ü§ù Contribui√ß√£o

### Como Contribuir

1. **Fork o projeto**
2. **Crie uma branch** (`git checkout -b feature/nova-funcionalidade`)
3. **Commit suas mudan√ßas** (`git commit -m 'Adiciona nova funcionalidade'`)
4. **Push para a branch** (`git push origin feature/nova-funcionalidade`)
5. **Abra um Pull Request**

### Padr√µes de C√≥digo

- **Nomes em portugu√™s** para arquivos e vari√°veis
- **TypeScript** obrigat√≥rio
- **ESLint + Prettier** para formata√ß√£o
- **Commits convencionais** (feat, fix, docs, etc.)

### Estrutura de Commit

```bash
feat: adiciona sistema de backup autom√°tico
fix: corrige c√°lculo de saldo em transfer√™ncias
docs: atualiza README com novos comandos
style: padroniza formata√ß√£o dos componentes
refactor: reorganiza estrutura de pastas
test: adiciona testes para sistema de metas
```

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa **MIT**. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üë®‚Äçüíª Autor

**Seu Nome**
- GitHub: [@seu-usuario](https://github.com/seu-usuario)
- LinkedIn: [Seu Perfil](https://linkedin.com/in/seu-perfil)
- Email: seu.email@exemplo.com

## üéâ Agradecimentos

- **Supabase** - Backend incr√≠vel
- **Vercel** - Deploy simplificado  
- **shadcn/ui** - Componentes lindos
- **Comunidade** - Feedback valioso

---

**Feito com ‚ù§Ô∏è e ‚òï no Brasil** üáßüá∑

**‚≠ê Se este projeto te ajudou, deixe uma star!**